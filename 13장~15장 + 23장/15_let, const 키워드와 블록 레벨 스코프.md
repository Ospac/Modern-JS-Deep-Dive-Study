# 15장 let, const 키워드와 블록 레벨 스코프
## 15.1 var 키워드로 선언한 변수의 문제점

- **변수 중복 선언 허용**
`var` 키워드로 선언한 변수는 중복 선언이 가능하다.
```js
var x = 1;
var y = 1;

// var 키워드로 선언된 변수는 같은 스코프 내에서 중복 선언을 허용한다.
// 초기화문이 있는 변수 선언문은 자바스크립트 엔진에 의해 var 키워드가 없는 것처럼 동작한다.
var x = 100;
// 초기화문이 없는 변수 선언문은 무시된다.
var y;

console.log(x); // 100
console.log(y); // 1
```
- **함수 레벨 스코프**
    - 함수의 코드 블록만을 지역 스코프로 인정
    - 코드 블록에서 선언한 것은 모두 전역 변수
- **변수 호이스팅**
    - 다른 코드보다, 변수 선언문이 먼저 평가되고, `undefined`로 초기화됨
    - 선언, 할당문 이전에 참조 가능
    - 할당문 이전에 변수를 참조하면 `undefined`를 반환

## 15.2 let 키워드
- **변수 중복 선언 금지**
    ```js
    let bar = 123;
    let bar = 456; // SyntaxError: Identifier 'bar' has already been declared
    ```
- **블록 레벨 스코프**
    - `let` 키워드로 선언한 변수는 모든 코드 블록을(`for`,`if`,`try/catch`문 등) 지역 스코프로 인정
    ```js
    let foo = 1; // 전역 변수
    {
      let foo = 2; // 지역 변수
      let bar = 3; // 지역 변수
    }

    console.log(foo); // 1
    console.log(bar); // ReferenceError: bar is not defined
    ```
    
- **변수 호이스팅이 발생하지 않는 것처럼 동작**
    - "선언 단계"와 "초기화 단계"가 분리되어 진행, 초기화는 런타임 시점에서 변수 선언문에 도달했을 때 실행 (`var`의 경우: 초기화도 런타임 이전에, 선언과 동시에)
    - 일시적 사각 지대<sup>Temporal Dead Zone; **TDZ**</sup> : 스코프의 시작 지점부터 초기화 단계 시작 지점까지 변수를 참조할 수 없다.
    - `let`, `const`, `class`의 선언문은 모두 호이스팅이 발생하지 않는 것처럼 보이지만, 마찬가지로 런타임 이전에 먼저 평가된다.

- 전역 객체와 let
     - `let` 키워드로 선언한 변수는 `var`와 달리 전역 객체의 프로퍼티가 아니다. (23장 실행 컨텍스트)
     - `window` 객체로 접근 불가능
## 15.3 const 키워드
상수를 선언하기 위해 사용한다.
- 선언과 초기화
  - `const` 키워드로 선언한 변수는 반드시 선언과 동시에 초기화해야 한다.
  - 블록 레벨 스코프, 변수 호이스팅이 발생하지 않는 것처럼 동작, TDZ 존재
- 재할당 금지
- 상수?
  - "원시 값"을 할당한 경우 변수 값을 변경할 수 없다.
       - 원시 값은 변경 불가능한 값이고, `const` 변수는 재할당이 불가능하다.
  - **"객체"를 할당한 경우 객체 값을 변경할 수 있다.**
    - const 키워드는 재할당을 금지할 뿐 "불변"을 의미하지 않는다. (11.1.1)
    - 새로운 값을 재할당하는 것은 불가능 하지만, 프로퍼티 수정을 통해 객체를 변경하는 것은 가능
## 15.4 var vs. let vs. const
- `var` 키워드 지양
- 재할당이 필요한 경우에만 `let` 사용, 변수 스코프를 최대한 좁게
- 읽기 전용인 원시 값과 객체에는 `const` 사용

| 구분 | var | let | const |
|------|-----|-----|-------|
| **스코프** | 함수 스코프  | 블록 스코프  | 블록 스코프  |
| **중복 선언** | 가능 | 불가능 (SyntaxError) | 불가능 (SyntaxError) |
| **호이스팅** | 호이스팅되며 undefined로 초기화 | 호이스팅되지만 TDZ(Temporal Dead Zone)로 인해 선언 전 접근 시 ReferenceError | 호이스팅되지만 TDZ로 인해 선언 전 접근 시 ReferenceError |
| **재할당** | 가능 | 가능 | 불가능 (TypeError) |